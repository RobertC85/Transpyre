#!/bin/sh
sleep 5
#make sure all switches are in their default position (off)
i2cset -y 1 0x10 0x01 0xFF
i2cset -y 1 0x10 0x01 0x00
i2cset -y 1 0x10 0x02 0xFF
i2cset -y 1 0x10 0x02 0x00
i2cset -y 1 0x10 0x03 0xFF
i2cset -y 1 0x10 0x03 0x00
i2cset -y 1 0x10 0x04 0xFF
i2cset -y 1 0x10 0x04 0x00
i2cset -y 1 0x10 0x01 0xFF
i2cset -y 1 0x10 0x01 0x00
i2cset -y 1 0x10 0x02 0xFF
i2cset -y 1 0x10 0x02 0x00
i2cset -y 1 0x10 0x03 0xFF
i2cset -y 1 0x10 0x03 0x00
i2cset -y 1 0x10 0x04 0xFF
i2cset -y 1 0x10 0x04 0x00
i2cset -y 1 0x10 0x01 0xFF
i2cset -y 1 0x10 0x01 0x00
i2cset -y 1 0x10 0x02 0xFF
i2cset -y 1 0x10 0x02 0x00
i2cset -y 1 0x10 0x03 0xFF
i2cset -y 1 0x10 0x03 0x00
i2cset -y 1 0x10 0x04 0xFF
i2cset -y 1 0x10 0x04 0x00
i2cset -y 1 0x10 0x01 0xFF
i2cset -y 1 0x10 0x01 0x00
i2cset -y 1 0x10 0x02 0xFF
i2cset -y 1 0x10 0x02 0x00
i2cset -y 1 0x10 0x03 0xFF
i2cset -y 1 0x10 0x03 0x00
i2cset -y 1 0x10 0x04 0xFF
i2cset -y 1 0x10 0x04 0x00
sleep 5
#test exciter power
i2cset -y 1 0x10 0x01 0xFF
#give time for pll to lock
sleep 5
#if pll remins unlocked ignore all commands after this next one
i2cset -y 1 0x10 0x01 0x00
#transmitter test cool down
sleep 5
#if previous test succeeded, proceed down this script starting with repeating the power on procedure
i2cset -y 1 0x10 0x01 0xFF
#just to be safe wait for pll to lock before turning on the amplifier and then audio
sleep 5
#activate amplifier
i2cset -y 1 0x10 0x02 0xFF
sleep 5
#activate audio clipper thus allowing audio
i2cset -y 1 0x10 0x03 0xFF
#select between audio source internal or mpx (default is internal but clipped mpx preferred)
i2cset -y 1 0x10 0x04 0xFF
#since this script is still in testing phase, and for safety, let's turn everything off again
sleep 5
i2cset -y 1 0x10 0x01 0xFF
i2cset -y 1 0x10 0x01 0x00
i2cset -y 1 0x10 0x02 0xFF
i2cset -y 1 0x10 0x02 0x00
i2cset -y 1 0x10 0x03 0xFF
i2cset -y 1 0x10 0x03 0x00
i2cset -y 1 0x10 0x04 0xFF
i2cset -y 1 0x10 0x04 0x00
i2cset -y 1 0x10 0x01 0xFF
i2cset -y 1 0x10 0x01 0x00
i2cset -y 1 0x10 0x02 0xFF
i2cset -y 1 0x10 0x02 0x00
i2cset -y 1 0x10 0x03 0xFF
i2cset -y 1 0x10 0x03 0x00
i2cset -y 1 0x10 0x04 0xFF
i2cset -y 1 0x10 0x04 0x00
i2cset -y 1 0x10 0x01 0xFF
i2cset -y 1 0x10 0x01 0x00
i2cset -y 1 0x10 0x02 0xFF
i2cset -y 1 0x10 0x02 0x00
i2cset -y 1 0x10 0x03 0xFF
i2cset -y 1 0x10 0x03 0x00
i2cset -y 1 0x10 0x04 0xFF
i2cset -y 1 0x10 0x04 0x00
i2cset -y 1 0x10 0x01 0xFF
i2cset -y 1 0x10 0x01 0x00
i2cset -y 1 0x10 0x02 0xFF
i2cset -y 1 0x10 0x02 0x00
i2cset -y 1 0x10 0x03 0xFF
i2cset -y 1 0x10 0x03 0x00
i2cset -y 1 0x10 0x04 0xFF
i2cset -y 1 0x10 0x04 0x00


